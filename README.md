# Setting Up a Miniconda Environment

This project includes a helper script, `setup_conda_env.sh`, that automatically installs Miniconda (if not already installed) and creates a conda environment using a specified `package-list.txt` file.

## Prerequisites

* Unix-like OS (Linux, macOS, or WSL on Windows)
* `bash` shell
* Internet connection

## Files Included

* `setup_conda_env.sh` – Bash script to install Miniconda and create a new environment
* `package-list.txt` – A list of packages to install in the environment

## Setup Instructions

### 1. Give the script execution permissions

```bash
chmod +x setup_conda_env.sh
```

### 2. Run the script

```bash
./setup_conda_env.sh
```

By default, this will:

* Check if Miniconda is installed.
* If not found, download and install it locally in your home directory.
* Create a new conda environment named (e.g., `myenv`) using the packages listed in `package-list.txt`.

## Notes

* If you want to specify a different environment name, edit the script and change the value of the `ENV_NAME` variable.
* After running the script, activate your environment using:

```bash
conda activate <env_name>
```

Replace `<env_name>` with the name set in the script.

## Troubleshooting

* If you see a `command not found: conda` error, try restarting your terminal or running:

```bash
source ~/.bashrc
```

* Ensure that `package-list.txt` is correctly formatted. It should contain one package per line, or use the format generated by `conda list --explicit`.


# Command-Line Argument Guide

These flags control the behavior of the program at runtime. You can combine multiple flags as needed to perform training, data/model pipelining, or prediction.  
**Note:** Parallel options require launching the program using `mpirun.openmpi` and specifying the number of processes.

---

## Arguments

### `--train`
- **Description**: Run the training routine for the model.
- **Type**: Flag (boolean)
- **Usage**: Include this flag to train the model using either serial or pipeline mode.

### `--model_p_MPI`
- **Description**: Enable model pipeline parallelism (used with `--train`).
- **Type**: Flag (boolean)
- **Usage**: Use this flag to split the model across MPI ranks for pipeline-parallel training.

### `--gpu`
- **Description**: Enable model training on a single GPU.
- **Type**: Flag (boolean)
- **Usage**: Use this flag to train the model in serial mode on a single CUDA-enabled GPU device.

### `--predict`
- **Description**: Run the prediction routine.
- **Type**: Flag (boolean)
- **Usage**: Include this flag to perform a prediction instead of training.

### `--currency`
- **Description**: Select currency for predictions (used with `--predict`).
- **Type**: Flag (String)
- **Usage**: Use this flag to select from the list of valid currencies
- **Valid Inputs**: `USD`, `EURO`,`YEN`,`GBP`,`CAD`,`INR`,`CNY`,`AUD`,`MXN`

### `--data_p` *(NOT IMPLEMENTED)*
- **Description**: Enable data parallelism (used with `--train`).
- **Type**: Flag (boolean)
- **Usage**: Use this flag to activate data-parallel training across MPI processes.

---

## Examples

### 1. Train the model using MPI pipeline parallelism with 6 cores:
```bash
mpirun.openmpi -np 6 python testing.py --train --model_p_MPI
```

### 2. Train the model using serial training:
```bash
python testing.py --train
```

### 3. Predict using a trained model with USD currency:

```bash
python testing.py --predict --currency USD
```

### 4. Train the model using GPU in data parallel mode:

```bash
python testing.py --train --gpu
```
### 5. Train the model using GPU on multiple GPUs in model parallel mode (ex: using 2 GPUs):

```bash
mpirun.openmpi -np 2 python testing.py --train --model_p_MPI --gpu
```